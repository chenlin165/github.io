<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的个人导航主页</title>
    <!-- 引入 Sortable.js 库来实现拖拽排序 -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <style>
        /* 1. 全局样式设置 */
        body {
            background-color: #C7EDCC; /* 设置护眼豆沙绿背景 */
            font-family: 'Microsoft YaHei', sans-serif; /* 设置字体 */
            margin: 0;
            padding: 20px;
        }

        /* 2. 时钟区域样式 */
        #clock {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }

        /* 3. 搜索栏区域样式 */
        .search-container {
            text-align: center;
            margin-bottom: 30px;
        }
        #searchInput {
            width: 400px;
            height: 40px;
            padding: 0 10px;
            border: 1px solid #ccc;
            outline: none;
            font-size: 16px;
        }
        #searchForm button {
            width: 100px;
            height: 42px;
            background: #317ef3;
            border: 1px solid #317ef3;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }
        #searchHistory {
            margin-top: 10px;
        }
        .history-item {
            display: inline-block;
            background: #f1f1f1;
            padding: 2px 8px;
            margin: 5px;
            border-radius: 3px;
        }
        .delete-btn {
            margin-left: 5px;
            cursor: pointer;
            border: none;
            background: transparent;
        }

        /* 4. 收藏夹网格布局 */
        .favorites-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .favorite-item {
            text-align: center;
            cursor: move; /* 拖拽时显示可移动光标 */
        }
        .site-logo {
            width: 64px;
            height: 64px;
            border-radius: 10px;
            margin-bottom: 5px;
        }
        .favorite-item a {
            text-decoration: none;
            color: #333;
            display: block;
            padding: 10px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 10px;
            transition: all 0.3s;
        }
        .favorite-item a:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-3px);
        }
    </style>
</head>
<body>

    <!-- 1. 时钟显示区域 -->
    <div id="clock">正在加载时间...</div>

    <!-- 2. 百度搜索栏 -->
    <div class="search-container">
        <form id="searchForm">
            <input type="text" id="searchInput" placeholder="请输入搜索内容...">
            <button type="submit">百度一下</button>
        </form>
        <div id="searchHistory"></div>
    </div>

    <!-- 3. 收藏网站展示区域 -->
    <div id="favoriteContainer" class="favorites-grid">
        <!-- 收藏项将通过JavaScript动态加载 -->
    </div>

    <script>
        // ========== 第一部分：实时时钟功能 ==========
        function updateClock() {
            const now = new Date(); // 创建一个Date对象，获取当前时间戳
            const year = now.getFullYear(); // 获取四位数的年份
            const month = String(now.getMonth() + 1).padStart(2, '0'); // 获取月份(0-11)，所以+1，并补0
            const day = String(now.getDate()).padStart(2, '0'); // 获取日期，并补0
            const hours = String(now.getHours()).padStart(2, '0'); // 获取小时，并补0
            const minutes = String(now.getMinutes()).padStart(2, '0'); // 获取分钟，并补0
            const seconds = String(now.getSeconds()).padStart(2, '0'); // 获取秒数，并补0
            const week = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'][now.getDay()]; // 根据getDay()返回的0-6获取星期

            // 将格式化后的时间字符串写入到id为'clock'的div中
            document.getElementById('clock').innerHTML = `${year}-${month}-${day} ${week} ${hours}:${minutes}:${seconds}`;
        }
        setInterval(updateClock, 1000); // 每隔1000毫秒（1秒）执行一次updateClock函数
        updateClock(); // 页面加载时立即执行一次，避免初始1秒的空白

        // ========== 第二部分：搜索栏与历史记录 ==========
        const searchForm = document.getElementById('searchForm');
        const searchInput = document.getElementById('searchInput');
        const searchHistoryEl = document.getElementById('searchHistory');

        // 表单提交事件（点击按钮或按回车）
        searchForm.addEventListener('submit', function(event) {
            event.preventDefault(); // 阻止表单默认提交行为（页面跳转）
            const keyword = searchInput.value.trim(); // 获取输入框的值并去除首尾空格
            if (keyword) {
                window.open(`https://www.baidu.com/s?wd=${encodeURIComponent(keyword)}`, '_blank'); // 在新窗口打开百度搜索
                saveSearchRecord(keyword); // 调用函数保存记录
                searchInput.value = ''; // 清空输入框
            }
        });

        // 保存单条搜索记录到 localStorage
        function saveSearchRecord(keyword) {
            let records = JSON.parse(localStorage.getItem('searchHistory')) || []; // 从localStorage读取记录，如果没有则默认为空数组
            records = records.filter(item => item !== keyword); // 过滤掉重复的关键词
            records.unshift(keyword); // 将新关键词添加到数组的开头（最新记录在最前面）
            if (records.length > 10) records.pop(); // 如果记录超过10条，删除最后一条（最旧的）
            localStorage.setItem('searchHistory', JSON.stringify(records)); // 将数组转为JSON字符串并保存回localStorage
            renderSearchHistory(); // 重新渲染历史记录显示区域
        }

        // 渲染显示所有历史记录
        function renderSearchHistory() {
            const records = JSON.parse(localStorage.getItem('searchHistory')) || [];
            searchHistoryEl.innerHTML = records.map(item => `
                <span class="history-item">
                    ${item}
                    <button class="delete-btn" data-keyword="${item}">×</button>
                </span>
            `).join(''); // 将数组中的每个记录生成HTML片段，并用空字符串连接起来

            // 为每个删除按钮绑定点击事件
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const keywordToDelete = this.getAttribute('data-keyword');
                    deleteSearchRecord(keywordToDelete);
                });
            });
        }

        // 删除单条历史记录
        function deleteSearchRecord(keyword) {
            let records = JSON.parse(localStorage.getItem('searchHistory')) || [];
            records = records.filter(item => item !== keyword); // 过滤掉要删除的关键词
            localStorage.setItem('searchHistory', JSON.stringify(records)); // 保存修改后的数组
            renderSearchHistory(); // 重新渲染
        }

        // 页面加载时，渲染一次历史记录
        renderSearchHistory();

        // ========== 第三部分：收藏夹与拖拽排序 ==========
        let favorites = JSON.parse(localStorage.getItem('myFavorites')) || [
            // 默认数据，您可以在上传后修改这里的链接和LOGO路径
            { name: '知乎', url: 'https://www.zhihu.com', logo: './logos/zhihu.png' },
            { name: 'GitHub', url: 'https://github.com', logo: './logos/github.png' },
            { name: 'CSDN', url: 'https://blog.csdn.net', logo: './logos/csdn.png' }
        ];

        // 渲染收藏夹到页面上
        function renderFavorites() {
            const container = document.getElementById('favoriteContainer');
            container.innerHTML = favorites.map((item, index) => `
                <div class="favorite-item" data-id="${index}">
                    <a href="${item.url}" target="_blank">
                        <img src="${item.logo}" alt="${item.name}" class="site-logo">
                        <span>${item.name}</span>
                    </a>
                </div>
            `).join('');

            // 初始化拖拽排序功能
            new Sortable(container, {
                animation: 150, // 拖拽时的动画过渡时间（毫秒）
                onEnd: function(evt) {
                    // 拖拽结束后的回调函数
                    const item = favorites.splice(evt.oldIndex, 1); // 从原位置删除被拖拽的元素
                    favorites.splice(evt.newIndex, 0, item); // 在新位置插入被拖拽的元素
                    localStorage.setItem('myFavorites', JSON.stringify(favorites)); // 将新的排序保存到localStorage
                }
            });
        }

        // 页面加载时，渲染收藏夹
        renderFavorites();
    </script>
</body>
</html>
